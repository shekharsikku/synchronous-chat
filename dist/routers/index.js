import { Router } from "express";
import { authEvents, limiter } from "../middlewares/index.js";
import AuthRouter from "../routers/auth.js";
import ContactRouter from "../routers/contact.js";
import GroupRouter from "../routers/group.js";
import MessageRouter from "../routers/message.js";
import UserRouter from "../routers/user.js";
import { connectEvents } from "../services/events.js";
import { SuccessResponse } from "../utils/response.js";
const router = Router();
router.use("/auth", limiter(10, 10), AuthRouter);
router.use("/user", limiter(10, 50), UserRouter);
router.use("/contact", limiter(10, 50), ContactRouter);
router.use("/message", limiter(10, 500), MessageRouter);
router.use("/group", limiter(10, 500), GroupRouter);
router.get("/wakeup", (req, res) => {
    const from = req.query.from || "Unknown";
    const timestamp = new Date().toISOString();
    return SuccessResponse(res, 200, `Wake up server by ${from} at ${timestamp}!`);
});
router.get("/events", authEvents, connectEvents);
export default router;
